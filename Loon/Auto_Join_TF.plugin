#!name=自动加入TestFlight
#!desc=自动监控TestFlight名额，一旦有新的名额即刻加入。
#!openUrl=https://apps.apple.com/app/id899247664
#!author=奶思[https://github.com/fmz200], DecoAri[https://github.com/DecoAri], xream[https://github.com/xream]
#!tag=定时任务
#!system=
#!system_version=
#!loon_version=3.2.4(787)
#!homepage=https://hub.kelee.one
#!icon=https://raw.githubusercontent.com/luestr/IconResource/main/App_icon/120px/TestFlight.png
#!input=App_ID
#!date=2025-11-08 03:27:30

[Argument]
CaptureAccountToken=switch, false, true, tag=捕获账号令牌, desc=此开关控制插件是否捕获账户令牌 
RunTask=switch, "false", "true", tag=自动加入TF, desc=此开关控制是否启动定时任务
RunMonitor=switch, "true", "false", tag=监控TF位置, desc=此开关控制是否启动定时任务
TaskCron=input, "0 0/2 * * * ?", tag=加入TF定时参数, desc=这里需要输入符合CRON表达式的参数
TaskMonitor=input, "0 * * * * ?", tag=监控TF定时参数, desc=这里需要输入符合CRON表达式的参数

[Rule]
DOMAIN, testflight.apple.com, PROXY

[Script]
http-request ^https?:\/\/testflight\.apple\.com\/v3\/accounts\/.*\/apps$ script-path = https://raw.githubusercontent.com/jqyisbest/CustomNetworkControls/refs/heads/main/Scripts/cd9b7c24339f267358cbd7986e17f4b87196abddb35866af741baff1d463ba07.js, tag=获取账号令牌, enable={CaptureAccountToken}
cron {TaskCron} script-path = https://raw.githubusercontent.com/jqyisbest/CustomNetworkControls/refs/heads/main/Scripts/9eda6ac7e368cfd9c779339f8b899be4d7365cd4776a4ea15c9ed2ec608fba24.js, tag=自动加入TF, timeout=600, enable={RunTask}
cron {TaskMonitor} script-path = https://raw.githubusercontent.com/jqyisbest/CustomNetworkControls/refs/heads/main/Scripts/f97aa9b42b0e355475eaa909db69d798fda05d00962fda0a7108645de6c68ca2.js, tag=监控TF位置, timeout=30, enable={RunMonitor}